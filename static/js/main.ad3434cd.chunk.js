(this.webpackJsonpecomfrontend=this.webpackJsonpecomfrontend||[]).push([[0],{100:function(e,t,c){},101:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c(3),s=c.n(n),i=c(28),r=c.n(i),o=(c(58),c(8)),l=(c(59),c(60),c(47)),d=c.n(l),j=c(117),u=c(13),b=Object(n.createContext)(),h=function(e){var t=e.reducer,c=e.initialState,s=e.children;return Object(a.jsx)(b.Provider,{value:Object(n.useReducer)(t,c),children:s})},m=function(){return Object(n.useContext)(b)},O=c(51).a.initializeApp({apiKey:"AIzaSyBMcey0m7Fs60peJHtOT7Xo-z95Gd9-CY8",authDomain:"clone-a0887.firebaseapp.com",databaseURL:"https://clone-a0887.firebaseio.com",projectId:"clone-a0887",storageBucket:"clone-a0887.appspot.com",messagingSenderId:"470976764248",appId:"1:470976764248:web:fc10161cd8f24dcdab6d2d",measurementId:"G-3GLH001SDB"}),p=O.firestore(),x=O.auth();var v=function(){var e=m(),t=Object(o.a)(e,1)[0],c=t.basket,n=t.user;return Object(a.jsxs)("div",{className:"header",children:[Object(a.jsx)(u.b,{to:"/",children:Object(a.jsx)("img",{src:"https://res.cloudinary.com/valodagreat/image/upload/v1606824330/automotive_m4cfko.jpg",alt:"logo",className:"header_logo"})}),Object(a.jsxs)("div",{className:"header_search",children:[Object(a.jsx)("input",{type:"text",className:"header_searchInput"}),Object(a.jsx)(d.a,{className:"header_searchIcon"})]}),Object(a.jsxs)("div",{className:"header_nav",children:[Object(a.jsx)(u.b,{to:n?"/":"/login",children:Object(a.jsxs)("div",{onClick:function(){n&&x.signOut()},className:"header_option",children:[Object(a.jsxs)("span",{className:"header_optionLineOne",children:["Hello ",n?n.email:"User"]}),Object(a.jsx)("span",{className:"header_optionLineTwo",children:n?"Sign Out":"Sign In"})]})}),Object(a.jsx)(u.b,{to:"/orders",children:Object(a.jsxs)("div",{className:"header_option",children:[Object(a.jsx)("span",{className:"header_optionLineOne",children:"Returns"}),Object(a.jsx)("span",{className:"header_optionLineTwo",children:"& Orders"})]})}),Object(a.jsxs)("div",{className:"header_option",children:[Object(a.jsx)("span",{className:"header_optionLineOne",children:"Your"}),Object(a.jsx)("span",{className:"header_optionLineTwo",children:"Prime"})]}),Object(a.jsx)(u.b,{to:"/checkout",children:Object(a.jsxs)("div",{className:"header_optionBasket",children:[Object(a.jsx)(j.a,{}),Object(a.jsx)("span",{className:"header_optionLineTwo header_basketCount",children:null===c||void 0===c?void 0:c.length})]})})]})]})},g=c(9);c(73);var f=function(e){var t=e.id,c=e.title,n=e.price,s=e.image,i=e.rating,r=m(),l=Object(o.a)(r,2),d=l[0].user,j=l[1],u=Object(g.f)();return Object(a.jsxs)("div",{className:"products",children:[Object(a.jsxs)("div",{className:"products_info",children:[Object(a.jsx)("p",{children:c}),Object(a.jsxs)("p",{className:"products_price",children:[Object(a.jsx)("small",{children:"$"}),Object(a.jsx)("strong",{children:n})]}),Object(a.jsx)("div",{className:"products_rating",children:Array(i).fill().map((function(e,t){return Object(a.jsx)("p",{children:"\u2b50"},t)}))})]}),Object(a.jsx)("img",{src:s,alt:c}),Object(a.jsx)("button",{onClick:function(){d?j({type:"ADD TO BASKET",item:{id:t,title:c,price:n,image:s,rating:i}}):u.push("/login")},children:"Add to cart"})]})};c(74);var _=function(){return Object(a.jsx)("div",{className:"home",children:Object(a.jsxs)("div",{className:"home_container",children:[Object(a.jsx)("img",{className:"home_image",src:"https://res.cloudinary.com/valodagreat/image/upload/v1606835504/damn_thaesb.jpg",alt:""}),Object(a.jsxs)("div",{className:"home_row",children:[Object(a.jsx)(f,{id:"23456",title:"Alternator",price:190.99,image:"https://res.cloudinary.com/valodagreat/image/upload/v1606840013/alternator_yo08br.jpg",rating:5}),Object(a.jsx)(f,{id:"12345",title:"Starter",price:222.99,image:"https://res.cloudinary.com/valodagreat/image/upload/v1606849420/starter_zyk0ux.jpg",rating:4})]}),Object(a.jsxs)("div",{className:"home_row",children:[Object(a.jsx)(f,{id:"56789",title:"Spark Plug",price:7.99,image:"https://res.cloudinary.com/valodagreat/image/upload/v1606850326/plug_ixzqxb.jpg",rating:4}),Object(a.jsx)(f,{id:"34567",title:"Fuel Pump",price:287.99,image:"https://res.cloudinary.com/valodagreat/image/upload/v1606850496/fuel_pump_jzmi5r.jpg",rating:3})]}),Object(a.jsxs)("div",{className:"home_row",children:[Object(a.jsx)(f,{id:"111213",title:"Battery",price:199.99,image:"https://res.cloudinary.com/valodagreat/image/upload/v1606850960/battery_iqihzd.jpg",rating:4}),Object(a.jsx)(f,{id:"21356",title:"Brake Pads",price:28.99,image:"https://res.cloudinary.com/valodagreat/image/upload/v1606851175/brake-pad_zg8avv.jpg",rating:4})]}),Object(a.jsx)("div",{className:"home_row",children:Object(a.jsx)(f,{id:"78910",title:"Performance brake pad/Rotor kit",price:899.29,image:"https://res.cloudinary.com/valodagreat/image/upload/v1606850754/rotor_kit_hbvqoc.jpg",rating:2})})]})})};c(75);var N=function(e){var t=e.id,c=e.title,n=e.price,s=e.image,i=e.rating,r=e.hidebutton,l=m(),d=Object(o.a)(l,2)[1];return Object(a.jsxs)("div",{className:"checkoutProduct",children:[Object(a.jsx)("img",{src:s,alt:"product",className:"checkoutProduct_image"}),Object(a.jsxs)("div",{className:"checkoutProduct_info",children:[Object(a.jsx)("p",{className:"checkoutProduct_title",children:c}),Object(a.jsxs)("p",{className:"checkoutProduct_price",children:[Object(a.jsx)("small",{children:"$"}),Object(a.jsx)("strong",{children:n})]}),Object(a.jsx)("div",{className:"checkoutProduct_rating",children:Array(i).fill().map((function(e,t){return Object(a.jsx)("p",{children:"\u2b50"},t)}))}),!r&&Object(a.jsx)("button",{onClick:function(){d({type:"REMOVE FROM BASKET",id:t})},children:"Remove from basket"})]})]})},y=(c(76),c(23)),k=c.n(y);var S=function(){var e=Object(g.f)(),t=m(),c=Object(o.a)(t,1)[0],n=c.basket,s=c.user;return Object(a.jsxs)("div",{className:"subtotal",children:[Object(a.jsx)(k.a,{renderText:function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("p",{children:["Subtotal (",null===n||void 0===n?void 0:n.length," items):",Object(a.jsx)("strong",{children:e})]}),Object(a.jsxs)("small",{className:"subtotal_gift",children:[Object(a.jsx)("input",{type:"checkbox",name:"",id:""}),"This order contains a gift"]})]})},decimalScale:2,value:function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return e+t.price}),0)}(n),displayType:"text",thousandSeparator:!0,prefix:"$"}),Object(a.jsx)("button",{onClick:function(t){s?e.push("/payment"):e.push("/login")},children:"Proceed to Checkout"})]})};c(78);var C=function(){var e=m(),t=Object(o.a)(e,1)[0],c=t.basket,n=t.user;return Object(a.jsxs)("div",{className:"checkout",children:[Object(a.jsxs)("div",{className:"checkout_left",children:[Object(a.jsx)("img",{src:"https://images-na.ssl-images-amazon.com/images/G/02/UK_CCMP/TM/OCC_Amazon1._CB423492668_.jpg",alt:"Ad",className:"checkout_ad"}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("h3",{children:["Hello,",null===n||void 0===n?void 0:n.email]}),Object(a.jsx)("h2",{className:"checkout_title",children:"Your Shopping Basket"}),null===c||void 0===c?void 0:c.map((function(e,t){return Object(a.jsx)(N,{id:e.id,title:e.title,price:e.price,image:e.image,rating:e.rating},t)}))]})]}),Object(a.jsx)("div",{className:"checkout_right",children:Object(a.jsx)(S,{})})]})};c(79);var T=function(){var e=Object(g.f)(),t=Object(n.useState)(""),c=Object(o.a)(t,2),s=c[0],i=c[1],r=Object(n.useState)(""),l=Object(o.a)(r,2),d=l[0],j=l[1];return Object(a.jsxs)("div",{className:"login",children:[Object(a.jsx)(u.b,{to:"/",children:Object(a.jsx)("img",{src:"https://res.cloudinary.com/valodagreat/image/upload/v1606824330/automotive_m4cfko.jpg",alt:"logo",className:"login_logo"})}),Object(a.jsxs)("div",{className:"login_container",children:[Object(a.jsx)("h1",{children:"Sign In"}),Object(a.jsxs)("form",{children:[Object(a.jsx)("h5",{children:"Email"}),Object(a.jsx)("input",{type:"email",value:s,onChange:function(e){return i(e.target.value)}}),Object(a.jsx)("h5",{children:"Password"}),Object(a.jsx)("input",{type:"password",value:d,onChange:function(e){return j(e.target.value)}}),Object(a.jsx)("button",{type:"submit",onClick:function(t){t.preventDefault(),x.signInWithEmailAndPassword(s,d).then((function(t){t&&e.push("/")})).catch((function(e){return console.log(e.message)}))},className:"login_signInButton",children:"Sign In"})]}),Object(a.jsx)("p",{children:"By signing in you agree to our condition of use and sale. Please see our Privacy Notice."}),Object(a.jsx)("button",{onClick:function(t){t.preventDefault(),x.createUserWithEmailAndPassword(s,d).then((function(t){t&&e.push("/")})).catch((function(e){return console.log(e.message)}))},className:"login_registerButton",children:"Sign Up"})]})]})},E=c(26),P=c.n(E),w=c(36),A=c(22),B=c(48),I=c.n(B).a.create({baseURL:"https://immense-bastion-62742.herokuapp.com"});c(97);var D=function(){var e=Object(g.f)(),t=Object(A.useStripe)(),c=Object(A.useElements)(),s=Object(n.useState)(null),i=Object(o.a)(s,2),r=i[0],l=i[1],d=Object(n.useState)(!0),j=Object(o.a)(d,2),b=j[0],h=j[1],O=Object(n.useState)(!1),x=Object(o.a)(O,2),v=x[0],f=x[1],_=Object(n.useState)(""),y=Object(o.a)(_,2),S=y[0],C=y[1],T=Object(n.useState)(""),E=Object(o.a)(T,2),B=E[0],D=E[1],R=m(),M=Object(o.a)(R,2),L=M[0],z=L.basket,F=L.user,Y=M[1];Object(n.useEffect)((function(){var e=function(){var e=Object(w.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I({method:"post",url:"/payments/create?total=".concat(100*U(z))});case 2:t=e.sent,D(t.data.clientSecret);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();U(z)>1&&e()}),[z]);var U=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return e+t.price}),0)},K=function(){var a=Object(w.a)(P.a.mark((function a(n){return P.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n.preventDefault(),B.length>1&&(C(!0),t.confirmCardPayment(B,{payment_method:{card:c.getElement(A.CardElement)}}).then((function(t){var c=t.paymentIntent;p.collection("users").doc(null===F||void 0===F?void 0:F.uid).collection("orders").doc(c.id).set({basket:z,amount:c.amount,created:c.created}),f(!0),l(null),C(!1),Y({type:"EMPTY BASKET"}),e.replace("/orders")})));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"payment",children:Object(a.jsxs)("div",{className:"payment_container",children:[Object(a.jsxs)("h1",{children:["Checkout (",Object(a.jsxs)(u.b,{to:"/checkout",children:[null===z||void 0===z?void 0:z.length," items"]}),")"]}),Object(a.jsxs)("div",{className:"payment_section",children:[Object(a.jsx)("div",{className:"payment_title",children:Object(a.jsx)("h3",{children:"Delivery Address"})}),Object(a.jsxs)("div",{className:"payment_address",children:[Object(a.jsx)("p",{children:null===F||void 0===F?void 0:F.email}),Object(a.jsx)("p",{children:"123 React Lane"}),Object(a.jsx)("p",{children:"Los Angeles,CA"})]})]}),Object(a.jsxs)("div",{className:"payment_section",children:[Object(a.jsx)("div",{className:"payment_title",children:Object(a.jsx)("h3",{children:"Review Items and Delivery"})}),Object(a.jsx)("div",{className:"payment_items",children:null===z||void 0===z?void 0:z.map((function(e,t){return Object(a.jsx)(N,{id:e.id,title:e.title,price:e.price,image:e.image,rating:e.rating},t)}))})]}),Object(a.jsxs)("div",{className:"payment_section",children:[Object(a.jsx)("div",{className:"payment_title",children:Object(a.jsx)("h3",{children:"Payment Methods"})}),Object(a.jsx)("div",{className:"payment_details",children:Object(a.jsxs)("form",{onSubmit:K,children:[Object(a.jsx)(A.CardElement,{onChange:function(e){h(e.empty),l(e.error?e.error.message:"")}}),Object(a.jsxs)("div",{className:"payment_priceContainer",children:[Object(a.jsx)(k.a,{renderText:function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("h3",{children:["Order Total: ",e]})})},decimalScale:2,value:U(z),displayType:"text",thousandSeparator:!0,prefix:"$"}),Object(a.jsx)("button",{className:"payment_button",disabled:S||b||v,children:Object(a.jsx)("span",{children:S?Object(a.jsx)("p",{children:"Processing"}):"Buy Now"})})]}),r&&Object(a.jsx)("div",{children:r})]})})]})]})})},R=c(49),M=c(50),L=c.n(M);c(99);var z=function(e){var t,c=e.order;return Object(a.jsxs)("div",{className:"order",children:[Object(a.jsx)("h2",{className:"order_p",children:"Order"}),Object(a.jsx)("p",{className:"order_time",children:L.a.unix(null===c||void 0===c?void 0:c.data.created).format("MMMM Do YYYY, h:mm a")}),Object(a.jsx)("p",{className:"order_id",children:Object(a.jsx)("small",{children:null===c||void 0===c?void 0:c.id})}),null===(t=c.data.basket)||void 0===t?void 0:t.map((function(e){return Object(a.jsx)(N,{id:e.id,image:e.image,title:e.title,price:e.price,rating:e.rating,hidebutton:!0},e.id)})),Object(a.jsx)(k.a,{renderText:function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("h3",{className:"order_total",children:["Order Total : ",e]})})},decimalScale:2,value:(null===c||void 0===c?void 0:c.data.amount)/100,displayType:"text",thousandSeparator:!0,prefix:"$"})]})};c(100);var F=function(){var e=m(),t=Object(o.a)(e,1)[0].user,c=Object(n.useState)([]),s=Object(o.a)(c,2),i=s[0],r=s[1];return Object(n.useEffect)((function(){t?p.collection("users").doc(null===t||void 0===t?void 0:t.uid).collection("orders").orderBy("created","desc").onSnapshot((function(e){r(e.docs.map((function(e){return{id:e.id,data:e.data()}})))})):r([])}),[t]),Object(a.jsxs)("div",{className:"orders",children:[Object(a.jsx)("h1",{children:"Your Orders"}),Object(a.jsx)("div",{className:"orders_order",children:i.map((function(e){return Object(a.jsx)(z,{order:e},e.id)}))})]})},Y=Object(R.a)("pk_test_51HuVcvGA308hXQPTpnS2bDEyCYQOLz2wxosXCIsVgaqWCvDMDe90Q89ibsentoHTgpouIZgsU6xfFXDIgz5vTJzs0024ZArYfR");var U=function(){var e=m(),t=Object(o.a)(e,2)[1];return Object(n.useEffect)((function(){x.onAuthStateChanged((function(e){t(e?{type:"SET USER",user:e}:{type:"SET USER",user:null})}))}),[t]),Object(a.jsx)(u.a,{children:Object(a.jsx)("div",{className:"app",children:Object(a.jsxs)(g.c,{children:[Object(a.jsxs)(g.a,{exact:!0,path:"/",children:[Object(a.jsx)(v,{}),Object(a.jsx)(_,{})]}),Object(a.jsx)(g.a,{exact:!0,path:"/login",children:Object(a.jsx)(T,{})}),Object(a.jsxs)(g.a,{exact:!0,path:"/checkout",children:[Object(a.jsx)(v,{}),Object(a.jsx)(C,{})]}),Object(a.jsxs)(g.a,{exact:!0,path:"/orders",children:[Object(a.jsx)(v,{}),Object(a.jsx)(F,{})]}),Object(a.jsxs)(g.a,{exact:!0,path:"/payment",children:[Object(a.jsx)(v,{}),Object(a.jsx)(A.Elements,{stripe:Y,children:Object(a.jsx)(D,{})})]})]})})})},K=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,118)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),a(e),n(e),s(e),i(e)}))},H=c(37),G=c(20),$=function(e,t){switch(t.type){case"ADD TO BASKET":return Object(G.a)(Object(G.a)({},e),{},{basket:[].concat(Object(H.a)(e.basket),[t.item])});case"REMOVE FROM BASKET":var c=e.basket.findIndex((function(e){return e.id===t.id})),a=Object(H.a)(e.basket);return c>=0?a.splice(c,1):console.warn("Can't Remove Product with id ".concat(t.id," as it's not in the basket")),Object(G.a)(Object(G.a)({},e),{},{basket:a});case"SET USER":return Object(G.a)(Object(G.a)({},e),{},{user:t.user});case"EMPTY BASKET":return Object(G.a)(Object(G.a)({},e),{},{basket:[]});default:return e}};r.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(h,{initialState:{basket:[],user:null},reducer:$,children:Object(a.jsx)(U,{})})}),document.getElementById("root")),K()},58:function(e,t,c){},59:function(e,t,c){},60:function(e,t,c){},73:function(e,t,c){},74:function(e,t,c){},75:function(e,t,c){},76:function(e,t,c){},78:function(e,t,c){},79:function(e,t,c){},97:function(e,t,c){},99:function(e,t,c){}},[[101,1,2]]]);
//# sourceMappingURL=main.ad3434cd.chunk.js.map